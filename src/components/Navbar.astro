---
import { SITE_TITLE } from '@consts'
import { Astronav, StickyHeader, Dropdown, DropdownItems } from 'astro-navbar'
import HeaderLink from '@components/HeaderLink.astro'
import LOGO from '@components/LOGO.astro'

const { pathname } = Astro.url
const subpath = pathname.split('/').slice(1)
const isHome = !(subpath[1]?.toLowerCase() == 'about' || subpath[1]?.toLowerCase() == 'search')
---
<StickyHeader class="sticky z-50 top-0 h-auto w-full backdrop-filter backdrop-blur-md border-b border-slate-400/30 bg-white/40 dark:bg-gray-800/65  drop-shadow-sm transition-all px-2 pt-2 pb-1 gap-5 flex"
  scrollY={50}
  activeClass="py-2 bg-white/80 border-gray-200 backdrop-blur-lg"
>
    <Astronav>
        <div class="w-full flex flex-row justify-between gap-x-10 md:w-[720px] md:mx-auto">
            <div class="flex">
                <a href=`/${Astro.currentLocale}` class="grid">
                    <LOGO width="26px" height="26px" />
                    <p class="mb-0 text-sm font-bold text-black dark:text-white" >{SITE_TITLE}</p>
                </a>
            </div>
            <Dropdown class="group my-auto">
                <button class="flex items-center text-black dark:text-white text-2xl transition-transform transform hover:scale-105">
                    <span class={isHome ? 'font-bold underline' : ''}>Blog</span>
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="3"
                            stroke="currentColor"
                            class="w-3 h-3 mt-0.5 group-open:rotate-180">
                            <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                        </svg>
                </button>
                <DropdownItems class="relative">
                    <div class="absolute top-0 left-4 p-8 border-2 border-slate-400/30 bg-white dark:bg-gray-800">
                        <ul>
                            <HeaderLink href=`/${Astro.currentLocale}/` class="text-xl">Home</HeaderLink>
                            <HeaderLink href=`/${Astro.currentLocale}/series` class="text-xl">Series</HeaderLink>
                            <HeaderLink href=`/${Astro.currentLocale}/tags` class="text-xl">Tags</HeaderLink>
                            <!-- <HeaderLink href=`/${Astro.currentLocale}/projects`>Projects</HeaderLink> -->
                        </ul>
                    </div>
                </DropdownItems>
            </Dropdown>
            <HeaderLink href=`/${Astro.currentLocale}/about` class="my-auto text-2xl">About</HeaderLink>
            <a href=`/${Astro.currentLocale}/search` class="transition-transform transform hover:scale-105 my-auto fill-none stroke-black dark:stroke-white">
                <svg class="w-8 h-8" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M14.9536 14.9458L21 21M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
            </a>
        </div>
    </Astronav>
</StickyHeader>