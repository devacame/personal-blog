---
import { SITE_TITLE } from '@consts'
import { Astronav, StickyHeader, MenuIcon, MenuItems, Dropdown, DropdownItems, DropdownSubmenu } from 'astro-navbar'
import HeaderLink from '@components/HeaderLink.astro'
import LOGO from '@components/LOGO.astro'

const { pathname } = Astro.url
const subpath = pathname.split('/').slice(1)
const isHome = !(subpath[1]?.toLowerCase() == 'about' || subpath[1]?.toLowerCase() == 'search')
---
<StickyHeader class="sticky z-50 top-0 h-auto w-full backdrop-filter backdrop-blur-md border-b border-slate-400/30 bg-white/40 dark:bg-gray-800/65  drop-shadow-sm transition-all px-2 pt-2 pb-1 gap-5 flex"
  scrollY={50}
  activeClass="py-2 bg-white/80 border-gray-200 backdrop-blur-lg"
>
    <Astronav closeOnClick>
        <div class="flex w-full justify-between">
            <a href=`/${Astro.currentLocale}` class="grid">
			    <LOGO width="26px" height="26px" />
			    <p class="mb-0 text-sm font-bold text-black dark:text-white" >{SITE_TITLE}</p>
            </a>
        </div>
        <HeaderLink href=`/${Astro.currentLocale}/search`>
            Search
        </HeaderLink>
        <MenuItems class="hidden md:flex">
        <ul class="flex flex-row gap-x-5 md:flex-row md:gap-5">
            <li>
            <Dropdown class="group">
                <button class="flex items-center">
                <span class={isHome ? 'font-bold underline' : ''}>Blog</span>
                <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="3"
                stroke="currentColor"
                class="w-3 h-3 mt-0.5 group-open:rotate-180">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
              </svg>
                </svg>
                </button>
                <DropdownItems class="relative">
                    <div class="absolute top-0 left-4 p-8 border-2 border-slate-400/30 bg-white dark:bg-gray-800">
                        <ul>
                            <HeaderLink href=`/${Astro.currentLocale}/`>Home</HeaderLink>
                            <HeaderLink href=`/${Astro.currentLocale}/series`>Series</HeaderLink>
                            <HeaderLink href=`/${Astro.currentLocale}/tags`>Tags</HeaderLink>
                            <!-- <HeaderLink href=`/${Astro.currentLocale}/projects`>Projects</HeaderLink> -->
                        </ul>
                    </div>
                </DropdownItems>
            </Dropdown>
            </li>
            <HeaderLink href=`/${Astro.currentLocale}/about`>About</HeaderLink>
        </ul>
    </MenuItems>
    <div class="block h-auto md:hidden">
        <MenuIcon class="w-10 h-10 text-gray-800" />
    </div>
</Astronav>
</StickyHeader>